<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Financial Records - ISKKOLAR</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <div class="app">
    <!-- Top Header -->
    <div id="header-placeholder"></div>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Financial Summary Cards -->
      <div class="financial-summary-grid">
        <div class="financial-card total">
          <div class="financial-card-icon">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
          </div>
          <div class="financial-card-content">
            <span class="financial-label">Total Received</span>
            <span class="financial-amount">₱1,500</span>
          </div>
        </div>

        <div class="financial-card yearly">
          <div class="financial-card-icon">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
            </svg>
          </div>
          <div class="financial-card-content">
            <span class="financial-label">This Year (2026)</span>
            <span class="financial-amount">₱1,500</span>
          </div>
        </div>
      </div>

      <!-- Transaction History -->
      <div class="card">
        <div class="card-header">
          <h3 class="card-title">Disbursement History</h3>
          <div class="filter-tabs">
            <button class="filter-tab active">All</button>
            <button class="filter-tab">2026</button>
            <button class="filter-tab">2025</button>
          </div>
        </div>

        <div class="transaction-list">
          <!-- 2026 Section -->
          <div class="year-section">
            <h4 class="year-heading">2026</h4>
            
            <div class="transaction-item" data-transaction-id="1">
              <div class="transaction-icon disbursement">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                </svg>
              </div>
              <div class="transaction-details">
                <div class="transaction-main">
                  <h4 class="transaction-title">Tuition Disbursement</h4>
                  <span class="transaction-amount positive">+₱1,500</span>
                </div>
                <div class="transaction-meta">
                  <span class="transaction-date">February 15, 2026</span>
                  <span class="transaction-type">1st Semester AY 2025-2026</span>
                </div>
                <span class="status-badge active">Completed</span>
                <!-- Signature Section - Pending -->
                <div class="signature-section">
                  <button class="btn-sign" onclick="openSignatureModal(this)" data-amount="₱1,500" data-date="February 15, 2026" data-type="Tuition Disbursement">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"/>
                    </svg>
                    Sign to Confirm Receipt
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Sample older transactions -->
          <div class="year-section">
            <h4 class="year-heading">2025</h4>
            
            <div class="transaction-item" data-transaction-id="2">
              <div class="transaction-icon disbursement">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                </svg>
              </div>
              <div class="transaction-details">
                <div class="transaction-main">
                  <h4 class="transaction-title">Allowance Disbursement</h4>
                  <span class="transaction-amount positive">+₱3,000</span>
                </div>
                <div class="transaction-meta">
                  <span class="transaction-date">August 20, 2025</span>
                  <span class="transaction-type">2nd Semester AY 2024-2025</span>
                </div>
                <span class="status-badge active">Completed</span>
                <!-- Signature Section - Already Signed -->
                <div class="signature-section">
                  <div class="signed-status">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                    Signed & Confirmed
                    <span class="signed-date">• Aug 21, 2025</span>
                  </div>
                </div>
              </div>
            </div>

            <div class="transaction-item" data-transaction-id="3">
              <div class="transaction-icon disbursement">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                </svg>
              </div>
              <div class="transaction-details">
                <div class="transaction-main">
                  <h4 class="transaction-title">Tuition Disbursement</h4>
                  <span class="transaction-amount positive">+₱1,500</span>
                </div>
                <div class="transaction-meta">
                  <span class="transaction-date">February 10, 2025</span>
                  <span class="transaction-type">1st Semester AY 2024-2025</span>
                </div>
                <span class="status-badge active">Completed</span>
                <!-- Signature Section - Already Signed -->
                <div class="signature-section">
                  <div class="signed-status">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                    Signed & Confirmed
                    <span class="signed-date">• Feb 11, 2025</span>
                  </div>
                </div>
              </div>
            </div>

            <div class="transaction-item" data-transaction-id="4">
              <div class="transaction-icon disbursement">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                </svg>
              </div>
              <div class="transaction-details">
                <div class="transaction-main">
                  <h4 class="transaction-title">Allowance Disbursement</h4>
                  <span class="transaction-amount positive">+₱3,000</span>
                </div>
                <div class="transaction-meta">
                  <span class="transaction-date">January 15, 2025</span>
                  <span class="transaction-type">1st Semester AY 2024-2025</span>
                </div>
                <span class="status-badge active">Completed</span>
                <!-- Signature Section - Already Signed -->
                <div class="signature-section">
                  <div class="signed-status">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                    Signed & Confirmed
                    <span class="signed-date">• Jan 16, 2025</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Bottom Navigation -->
    <div id="bottom-nav-placeholder"></div>
  </div>

  <!-- Signature Confirmation Modal -->
  <div class="signature-modal" id="signatureModal">
    <div class="signature-modal-content">
      <div class="signature-modal-header">
        <h3>Confirm Receipt</h3>
        <button class="signature-modal-close" onclick="closeSignatureModal()">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>
      <div class="signature-modal-body">
        <div class="signature-info">
          <div class="signature-info-row">
            <span class="signature-info-label">Disbursement Type</span>
            <span class="signature-info-value" id="modalType">Tuition Disbursement</span>
          </div>
          <div class="signature-info-row">
            <span class="signature-info-label">Amount</span>
            <span class="signature-info-value" id="modalAmount">₱1,500</span>
          </div>
          <div class="signature-info-row">
            <span class="signature-info-label">Date</span>
            <span class="signature-info-value" id="modalDate">February 15, 2026</span>
          </div>
        </div>
        <div class="signature-checkbox">
          <input type="checkbox" id="confirmReceipt" onchange="toggleConfirmButton()">
          <label for="confirmReceipt">I confirm that I have received this disbursement and acknowledge that this serves as my digital signature as proof of receipt.</label>
        </div>
      </div>
      <div class="signature-modal-footer">
        <button class="btn-cancel-sign" onclick="closeSignatureModal()">Cancel</button>
        <button class="btn-confirm-sign" id="confirmSignBtn" disabled onclick="confirmSignature()">Confirm & Sign</button>
      </div>
    </div>
  </div>

  <script src="js/navigation.js"></script>
  <script>
    // Filter tabs functionality
    document.querySelectorAll('.filter-tab').forEach(tab => {
      tab.addEventListener('click', function() {
        document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
        this.classList.add('active');
      });
    });

    // Signature Modal Functions
    let currentSignButton = null;

    function openSignatureModal(button) {
      currentSignButton = button;
      const modal = document.getElementById('signatureModal');
      
      // Populate modal with transaction details
      document.getElementById('modalType').textContent = button.dataset.type;
      document.getElementById('modalAmount').textContent = button.dataset.amount;
      document.getElementById('modalDate').textContent = button.dataset.date;
      
      // Reset checkbox and button
      document.getElementById('confirmReceipt').checked = false;
      document.getElementById('confirmSignBtn').disabled = true;
      
      modal.classList.add('active');
    }

    function closeSignatureModal() {
      const modal = document.getElementById('signatureModal');
      modal.classList.remove('active');
      currentSignButton = null;
    }

    function toggleConfirmButton() {
      const checkbox = document.getElementById('confirmReceipt');
      const confirmBtn = document.getElementById('confirmSignBtn');
      confirmBtn.disabled = !checkbox.checked;
    }

    function confirmSignature() {
      if (!currentSignButton) return;
      
      // Get current date for signature timestamp
      const now = new Date();
      const options = { month: 'short', day: 'numeric', year: 'numeric' };
      const signedDate = now.toLocaleDateString('en-US', options);
      
      // Replace the sign button with signed status
      const signatureSection = currentSignButton.parentElement;
      signatureSection.innerHTML = `
        <div class="signed-status">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
          Signed & Confirmed
          <span class="signed-date">• ${signedDate}</span>
        </div>
      `;
      
      closeSignatureModal();
    }

    // Close modal when clicking outside
    document.getElementById('signatureModal').addEventListener('click', function(e) {
      if (e.target === this) {
        closeSignatureModal();
      }
    });
  </script>
</body>
</html>
